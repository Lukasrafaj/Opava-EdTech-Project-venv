<!DOCTYPE html>

<html lang="Debug locale: {{ current_locale }}">
            
    <head>
        {% set flags = {
            'en': 'üá¨üáß',
            'cs': 'üá®üáø',
            'sk': 'üá∏üá∞'
            } %}
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      crossorigin="anonymous"
    />
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="{{url_for('static', filename='general.css')}}">
        <link rel="stylesheet" href ="{{url_for('static', filename='left_panel.css')}}">
        <link rel="stylesheet" href="{{url_for('static', filename='right_panel.css')}}">
        <link rel="stylesheet" href="{{url_for('static', filename='header_left.css')}}">
        <link rel="stylesheet" href="{{url_for('static', filename='header_center.css')}}">
        <link rel="stylesheet" href="{{url_for('static', filename='header_right.css')}}">
        <link rel="stylesheet" href="{{url_for('static', filename='content_section.css')}}">
        <link rel="stylesheet" href="{{url_for('static', filename='center_panel.css')}}">
        <link rel="stylesheet" href="{{url_for('static', filename='registration.css')}}">
        <link rel="stylesheet" href="{{url_for('static', filename='profile.css')}}">
        <link rel="stylesheet" href="{{url_for('static', filename='settings.css')}}">
        <link rel="stylesheet" href="{{url_for('static', filename='settings-language.css')}}">
        <link rel="stylesheet" href="{{url_for('static', filename='language-button.css')}}">
        


        <title>{% block title %}Home{% endblock %}</title>


    </head>

<body class="body-container">
    <div class = "div-header">

        <div class = "div-name-section">
            <img class="image-logo" src="{{url_for('static', filename='images/logo.png')}}" id="logo"></img>
        </div>

        <div class = "div-menu-section">
            
            {% if user.is_authenticated %}
            <a href="/home">
                <button 
                class = "button-menu {% if request.path == '/home' %}active{% endif %}">&#8962; {{_('Home')}}</button>  
            </a>
            {% endif %}

            <a href="/courses">
                <button class = "button-menu {% if request.path == '/courses' %}active{% endif %}">&#128213; {{_('Courses')}}</button>
            </a>

            <a href="/about">
                <button class = "button-menu {% if request.path == '/about' %}active{% endif %}">&#9432; {{_("About")}}</button>
            </a>
            
            <a href="/donate">
                <button class = "button-menu {% if request.path == '/donate' %}active{% endif %}">&#10084; {{_('Donate')}}</button>
            </a>
            
            
        </div>
        
        {% if user.is_authenticated %}
            
            <div class="profile-container">
                <button class="profile-button" id="profileBtn">
                <span class="profileArrow" id="profileArrow">‚ñº</span>
                <span class="profile-name">{{current_user.Name}}</span>
                <div class="profile-avatar"></div>
                
                </button>
                
                <div class="dropdown-menu" id="dropdownMenu">
                <div class="dropdown-header">
                    <div class="dropdown-user-info">
                        <div class="dropdown-avatar"></div>
                        <div class="dropdown-user-details">
                            <p>{{current_user.Email}}</p>
                            <h4>{{current_user.Name}}</h4>
                        </div>
                    </div>
                </div>

                <button class="menu-item" id="profileOption">
                    <span class="menu-icon">üë§</span>
                    <span>{{ _('My Profile') }}</span>
                </button>

                <button class="menu-item" id="settingsOption">
                    <span class="menu-icon">‚öôÔ∏è</span>
                    <span>{{ _('Settings') }}</span>
                </button>

                <button class="menu-item" id="helpOption">
                    <span class="menu-icon">‚ùì</span>
                    <span>{{ _('Help & Support') }}</span>
                </button>

                <div class="divider"></div>

                <button class="menu-item logout" id="logoutOption">
                    <span class="menu-icon">üö™</span>
                    <span>{{ _('Logout') }}</span>
                </button>
                </div>
            </div>
            
        
        {% else %}

            {# nolog right section #}
        <div class="div-login-panel">
            <a href="/login">
                    <button class = "login-button">{{ _('Login') }} </button>
                </a>
            <a href="/signup">
                <button class = "login-button">{{ _('Sign Up') }} </button>
            </a>
        

            
            
        
        {% endif %}
        {% if not user.is_authenticated %}
        <div class="language-selector">
            <button class="language-btn" id="languageBtn" type="button">
                <span id="currentLangFlag">üá¨üáß</span>
                <span id="currentLangName">English</span>
            </button>
            
            <div class="language-options" id="languageOptions">
                <div class="language-option" data-lang="en" data-url="{{ url_for('lang.set_language', lang='en') }}">
                    üá¨üáß English
                </div>
                <div class="language-option" data-lang="cs" data-url="{{ url_for('lang.set_language', lang='cs') }}">
                    üá®üáø Czech
                </div>
                <div class="language-option" data-lang="sk" data-url="{{ url_for('lang.set_language', lang='sk') }}">
                    üá∏üá∞ Slovak
                </div>
            </div>
        </div>
            
        </div>
            
            <script>
                (function() {
                    const currentLocale = "{{ session.get('lang', 'en') }}";
                    const languageBtn = document.getElementById('languageBtn');
                    const languageOptions = document.getElementById('languageOptions');
                    const currentLangFlag = document.getElementById('currentLangFlag');
                    const currentLangName = document.getElementById('currentLangName');
                    
                    const langMap = {
                        'en': { flag: 'üá¨üáß', name: 'English' },
                        'cs': { flag: 'üá®üáø', name: 'Czech' },
                        'sk': { flag: 'üá∏üá∞', name: 'Slovak' }
                    };
                    
                    console.log('Language selector initialized');
                    console.log('Current locale:', currentLocale);
                    
                    // Set current language display
                    if (langMap[currentLocale]) {
                        currentLangFlag.textContent = langMap[currentLocale].flag;
                        currentLangName.textContent = langMap[currentLocale].name;
                    }
                    
                    // Highlight active language option
                    const options = document.querySelectorAll('.language-option');
                    options.forEach(option => {
                        const lang = option.getAttribute('data-lang');
                        if (lang === currentLocale) {
                            option.classList.add('active');
                        }
                        
                        // Add click handler
                        option.addEventListener('click', function() {
                            const url = this.getAttribute('data-url');
                            console.log('Navigating to:', url);
                            window.location.href = url;
                        });
                    });
                    
                    // Toggle dropdown
                    languageBtn.addEventListener('click', function(e) {
                        console.log('Button clicked!');
                        e.preventDefault();
                        e.stopPropagation();
                        const isShowing = languageOptions.classList.contains('show');
                        console.log('Currently showing:', isShowing);
                        languageOptions.classList.toggle('show');
                        console.log('After toggle:', languageOptions.classList.contains('show'));
                    });
                    
                    // Close dropdown when clicking outside
                    document.addEventListener('click', function(e) {
                        if (!languageBtn.contains(e.target) && !languageOptions.contains(e.target)) {
                            languageOptions.classList.remove('show');
                        }
                    });
                })();
            </script>
        {% endif %}


        {# language collapsable section #}
        

        
       



        
            
    </div>


{% with messages = get_flashed_messages(with_categories = true) %}
    {% if messages %}

        {% for category, message in messages %}
            {% if category == 'error'%}
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        {{ message }}
                <button type="button" class="close" data-dismiss="alert" aria-label="{{ _('Close') }}">
            <span aria-hidden="true">&times;</span>
            </button>
    </div>

            {% else %}
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

            {% endif %}
        {% endfor %}
    {% endif %}

{% endwith %} 


    

    {% block content_section %}

    
    <div class = "div-content-section">
        <div class = "div-left-panel">
            <div class = "div-logo-panel">
                

            </div>

            
            
        </div>

        
            
        <div class = "div-main-content-panel">
                {% block content %}
            
                {% endblock %}
        
            
        </div>

        <div class = "div-right-panel">
            
            
        </div>

    </div>
    {% endblock %}





    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>

{% block javascript %}
    <script type="text/javascript">
      function deleteNote(noteId) {
  fetch("/delete-note", {
    method: "POST",
    body: JSON.stringify({ noteId: noteId }),
  }).then((_res) => {
    window.location.href = "/";
  });
  }
  
</script>
{% endblock %}

<script src="{{ url_for('static', filename='script_profile.js') }}"></script>
<script src="{{ url_for('static', filename='script_settings.js') }}"></script>
<script src="{{ url_for('static', filename='settings-language.js') }}"></script>
<script src="{{ url_for('static', filename='courses-buttons.js') }}"></script>
</body>


</html>